<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="goBack()">
        <ion-icon name="arrow-back"></ion-icon>
        <span class="button-text">Voltar</span>
      </ion-button>
    </ion-buttons>
    <ion-title>
      Detalhes do Pokémon
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Carregando detalhes do Pokémon...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-container">
    <ion-icon name="alert-circle-outline" size="large"></ion-icon>
    <h3>Erro ao carregar detalhes</h3>
    <p>Não foi possível carregar os detalhes deste Pokémon.</p>
    <ion-button (click)="loadPokemonDetails()" fill="outline">
      Tentar Novamente
    </ion-button>
  </div>

  <!-- Pokemon Details -->
  <div *ngIf="!loading && !error && pokemon" class="pokemon-details">
    <!-- Header Card -->
    <ion-card class="header-card">
      <ion-card-header>
        <ion-card-title class="pokemon-name">
          {{ pokemon.name | titlecase }}
        </ion-card-title>
        <ion-card-subtitle>
          #{{ pokemon.id.toString().padStart(3, '0') }}
        </ion-card-subtitle>
      </ion-card-header>
      
      <ion-card-content class="images-container">
        <ion-grid>
          <ion-row>
            <ion-col size="6" size-sm="6" size-md="6">
              <div class="image-section">
                <h4>Normal</h4>
                <img 
                  [src]="pokemon.images.default" 
                  [alt]="pokemon.name + ' (Normal)'"
                  class="pokemon-image"
                  (error)="onImageError($event)"
                />
              </div>
            </ion-col>
            <ion-col size="6" size-sm="6" size-md="6">
              <div class="image-section">
                <h4>Shiny</h4>
                <img 
                  [src]="pokemon.images.shiny" 
                  [alt]="pokemon.name + ' (Shiny)'"
                  class="pokemon-image"
                  (error)="onImageError($event)"
                />
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>

    <!-- Info Grid -->
    <ion-grid class="info-grid">
      <ion-row>
        <!-- Basic Info Card -->
        <ion-col size="12" size-md="6" size-lg="4">
          <ion-card>
            <ion-card-header>
              <ion-card-title>Informações Básicas</ion-card-title>
            </ion-card-header>
            
            <ion-card-content>
              <ion-list>
                <ion-item>
                  <ion-label>
                    <h3>Altura</h3>
                    <p>{{ pokemon.height }} m</p>
                  </ion-label>
                </ion-item>
                <ion-item>
                  <ion-label>
                    <h3>Peso</h3>
                    <p>{{ pokemon.weight }} kg</p>
                  </ion-label>
                </ion-item>
                <ion-item>
                  <ion-label>
                    <h3>Experiência Base</h3>
                    <p>{{ pokemon.baseExperience }}</p>
                  </ion-label>
                </ion-item>
              </ion-list>
            </ion-card-content>
          </ion-card>
        </ion-col>

        <!-- Types Card -->
        <ion-col size="12" size-md="6" size-lg="4">
          <ion-card>
            <ion-card-header>
              <ion-card-title>Tipos</ion-card-title>
            </ion-card-header>
            
            <ion-card-content>
              <div class="types-container">
                <ion-chip 
                  *ngFor="let type of pokemon.types" 
                  [color]="getTypeColor(type)"
                  class="type-chip"
                >
                  {{ type | titlecase }}
                </ion-chip>
              </div>
            </ion-card-content>
          </ion-card>
        </ion-col>

        <!-- Abilities Card -->
        <ion-col size="12" size-md="12" size-lg="4">
          <ion-card>
            <ion-card-header>
              <ion-card-title>Habilidades</ion-card-title>
            </ion-card-header>
            
            <ion-card-content>
              <ion-list>
                <ion-item *ngFor="let ability of pokemon.abilities">
                  <ion-label>
                    <h3>{{ ability | titlecase }}</h3>
                  </ion-label>
                </ion-item>
              </ion-list>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>

      <!-- Stats Card - Full Width -->
      <ion-row>
        <ion-col size="12">
          <ion-card>
            <ion-card-header>
              <ion-card-title>Estatísticas</ion-card-title>
            </ion-card-header>
            
            <ion-card-content>
              <div class="stats-container">
                <ion-grid>
                  <ion-row>
                    <ion-col 
                      size="12" 
                      size-sm="6" 
                      size-md="4" 
                      size-lg="3" 
                      *ngFor="let stat of pokemon.stats"
                    >
                      <div class="stat-item">
                        <div class="stat-header">
                          <span class="stat-name">{{ stat.name }}</span>
                          <span class="stat-value">{{ stat.value }}</span>
                        </div>
                        <ion-progress-bar 
                          [value]="stat.value / 255" 
                          [color]="getStatColor(stat.value)"
                        ></ion-progress-bar>
                      </div>
                    </ion-col>
                  </ion-row>
                </ion-grid>
              </div>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</ion-content> 